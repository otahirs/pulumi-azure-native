package main

import (
	"github.com/pulumi/pulumi-azure-native-sdk/voiceservices/v2"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

func main() {
	pulumi.Run(func(ctx *pulumi.Context) error {
		_, err := voiceservices.NewCommunicationsGateway(ctx, "communicationsGateway", &voiceservices.CommunicationsGatewayArgs{
			AutoGeneratedDomainNameLabelScope: pulumi.String("NoReuse"),
			Codecs: pulumi.StringArray{
				pulumi.String("PCMA"),
			},
			CommunicationsGatewayName: pulumi.String("myname"),
			Connectivity:              pulumi.String("PublicAddress"),
			E911Type:                  pulumi.String("Standard"),
			Location:                  pulumi.String("useast"),
			Platforms: pulumi.StringArray{
				pulumi.String("OperatorConnect"),
			},
			ResourceGroupName: pulumi.String("testrg"),
			ServiceLocations: []voiceservices.ServiceRegionPropertiesArgs{
				{
					Name: pulumi.String("useast"),
					PrimaryRegionProperties: {
						AllowedMediaSourceAddressPrefixes: pulumi.StringArray{
							pulumi.String("10.1.2.0/24"),
						},
						AllowedSignalingSourceAddressPrefixes: pulumi.StringArray{
							pulumi.String("10.1.1.0/24"),
						},
						OperatorAddresses: pulumi.StringArray{
							pulumi.String("198.51.100.1"),
						},
					},
				},
				{
					Name: pulumi.String("useast2"),
					PrimaryRegionProperties: {
						AllowedMediaSourceAddressPrefixes: pulumi.StringArray{
							pulumi.String("10.2.2.0/24"),
						},
						AllowedSignalingSourceAddressPrefixes: pulumi.StringArray{
							pulumi.String("10.2.1.0/24"),
						},
						OperatorAddresses: pulumi.StringArray{
							pulumi.String("198.51.100.2"),
						},
					},
				},
			},
			TeamsVoicemailPilotNumber: pulumi.String("1234567890"),
		})
		if err != nil {
			return err
		}
		return nil
	})
}
