import * as pulumi from "@pulumi/pulumi";
import * as azure_native from "@pulumi/azure-native";

const agentPool = new azure_native.containerservice.AgentPool("agentPool", {
    agentPoolName: "agentpool1",
    count: 3,
    kubeletConfig: {
        allowedUnsafeSysctls: [
            "kernel.msg*",
            "net.core.somaxconn",
        ],
        cpuCfsQuota: true,
        cpuCfsQuotaPeriod: "200ms",
        cpuManagerPolicy: "static",
        failSwapOn: false,
        imageGcHighThreshold: 90,
        imageGcLowThreshold: 70,
        topologyManagerPolicy: "best-effort",
    },
    linuxOSConfig: {
        swapFileSizeMB: 1500,
        sysctls: {
            kernelThreadsMax: 99999,
            netCoreWmemDefault: 12345,
            netIpv4IpLocalPortRange: "20000 60000",
            netIpv4TcpTwReuse: true,
        },
        transparentHugePageDefrag: "madvise",
        transparentHugePageEnabled: "always",
    },
    orchestratorVersion: "",
    osType: "Linux",
    resourceGroupName: "rg1",
    resourceName: "clustername1",
    vmSize: "Standard_DS2_v2",
});
