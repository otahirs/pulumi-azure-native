using System.Collections.Generic;
using System.Linq;
using Pulumi;
using AzureNative = Pulumi.AzureNative;

return await Deployment.RunAsync(() => 
{
    var service = new AzureNative.HealthcareApis.Service("service", new()
    {
        Identity = new AzureNative.HealthcareApis.Inputs.ServicesResourceIdentityArgs
        {
            Type = "SystemAssigned",
        },
        Kind = AzureNative.HealthcareApis.Kind.Fhir_R4,
        Location = "Southeast Asia",
        Properties = new AzureNative.HealthcareApis.Inputs.ServicesPropertiesArgs
        {
            AccessPolicies = new[]
            {
                new AzureNative.HealthcareApis.Inputs.ServiceAccessPolicyEntryArgs
                {
                    ObjectId = "c487e7d1-3210-41a3-8ccc-e9372b78da47",
                },
                new AzureNative.HealthcareApis.Inputs.ServiceAccessPolicyEntryArgs
                {
                    ObjectId = "5b307da8-43d4-492b-8b66-b0294ade872f",
                },
            },
            AuthenticationConfiguration = new AzureNative.HealthcareApis.Inputs.ServiceAuthenticationConfigurationInfoArgs
            {
                Audience = "https://azurehealthcareapis.com",
                Authority = "https://login.microsoftonline.com/abfde7b2-df0f-47e6-aabf-2462b07508dc",
                SmartProxyEnabled = true,
            },
            CorsConfiguration = new AzureNative.HealthcareApis.Inputs.ServiceCorsConfigurationInfoArgs
            {
                AllowCredentials = false,
                Headers = new[]
                {
                    "*",
                },
                MaxAge = 1440,
                Methods = new[]
                {
                    "DELETE",
                    "GET",
                    "OPTIONS",
                    "PATCH",
                    "POST",
                    "PUT",
                },
                Origins = new[]
                {
                    "*",
                },
            },
            CosmosDbConfiguration = new AzureNative.HealthcareApis.Inputs.ServiceCosmosDbConfigurationInfoArgs
            {
                CrossTenantCmkApplicationId = "de3fbeef-8c3a-428e-8b9f-4d229c8a85f4",
                KeyVaultKeyUri = "https://my-vault.vault.azure.net/keys/my-key",
                OfferThroughput = 1000,
            },
            ExportConfiguration = new AzureNative.HealthcareApis.Inputs.ServiceExportConfigurationInfoArgs
            {
                StorageAccountName = "existingStorageAccount",
            },
            PrivateEndpointConnections = new() { },
            PublicNetworkAccess = "Disabled",
        },
        ResourceGroupName = "rg1",
        ResourceName = "service1",
        Tags = null,
    });

});

