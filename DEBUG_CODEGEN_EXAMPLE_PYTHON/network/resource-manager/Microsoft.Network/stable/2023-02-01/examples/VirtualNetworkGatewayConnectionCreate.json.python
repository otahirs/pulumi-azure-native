import pulumi
import pulumi_azure_native as azure_native

virtual_network_gateway_connection = azure_native.network.VirtualNetworkGatewayConnection("virtualNetworkGatewayConnection",
    connection_mode="Default",
    connection_protocol="IKEv2",
    connection_type="IPsec",
    dpd_timeout_seconds=30,
    egress_nat_rules=[azure_native.network.SubResourceArgs(
        id="/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/virtualNetworkGateways/vpngw/natRules/natRule2",
    )],
    enable_bgp=False,
    gateway_custom_bgp_ip_addresses=[
        azure_native.network.GatewayCustomBgpIpAddressIpConfigurationArgs(
            custom_bgp_ip_address="169.254.21.1",
            ip_configuration_id="/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/virtualNetworkGateways/vpngw/ipConfigurations/default",
        ),
        azure_native.network.GatewayCustomBgpIpAddressIpConfigurationArgs(
            custom_bgp_ip_address="169.254.21.3",
            ip_configuration_id="/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/virtualNetworkGateways/vpngw/ipConfigurations/ActiveActive",
        ),
    ],
    ingress_nat_rules=[azure_native.network.SubResourceArgs(
        id="/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/virtualNetworkGateways/vpngw/natRules/natRule1",
    )],
    ipsec_policies=[],
    local_network_gateway2=azure_native.network.LocalNetworkGatewayArgs(
        gateway_ip_address="x.x.x.x",
        id="/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/localNetworkGateways/localgw",
        local_network_address_space=azure_native.network.AddressSpaceArgs(
            address_prefixes=["10.1.0.0/16"],
        ),
        location="centralus",
        tags={},
    ),
    location="centralus",
    resource_group_name="rg1",
    routing_weight=0,
    shared_key="Abc123",
    traffic_selector_policies=[],
    use_policy_based_traffic_selectors=False,
    virtual_network_gateway1=azure_native.network.VirtualNetworkGatewayArgs(
        active_active=False,
        bgp_settings=azure_native.network.BgpSettingsArgs(
            asn=65514,
            bgp_peering_address="10.0.1.30",
            peer_weight=0,
        ),
        enable_bgp=False,
        gateway_type="Vpn",
        id="/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/virtualNetworkGateways/vpngw",
        ip_configurations=[azure_native.network.VirtualNetworkGatewayIPConfigurationArgs(
            id="/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/virtualNetworkGateways/vpngw/ipConfigurations/gwipconfig1",
            name="gwipconfig1",
            private_ip_allocation_method="Dynamic",
            public_ip_address=azure_native.network.SubResourceArgs(
                id="/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/publicIPAddresses/gwpip",
            ),
            subnet=azure_native.network.SubResourceArgs(
                id="/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/virtualNetworks/vnet1/subnets/GatewaySubnet",
            ),
        )],
        location="centralus",
        sku=azure_native.network.VirtualNetworkGatewaySkuArgs(
            name="VpnGw1",
            tier="VpnGw1",
        ),
        tags={},
        vpn_type="RouteBased",
    ),
    virtual_network_gateway_connection_name="connS2S")
